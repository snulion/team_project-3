
<div class="container" style="margin-top:50px">
  <!--First row-->
  <div class="row">
    <div class="col-md-12">
        <div class="jumbotron">
            <h2 class="h2-responsive">서울대 입구역, 맛집 2인자를 찾아라</h2>
            <br>
            <p>Big data & Data Crawling 기반 강력한 맛집 탐색 틀</p>
            <hr>
            <p>지금 시작하세요</p>
        </div>
    </div>
</div>
<!--/.First row-->

<hr class="extra-margins">

<!--Second row-->
<div class="row">
    <!--망고 플레이트-->
    <div class="col-md-4">
      <!--Card-->
      <div class="card">

          <!--Card image-->
          <div class="view overlay hm-white-slight">
              <img src="<%= asset_path("mangoplate.jpg") %>" class="img-fluid" alt="" height="350">
              <a href="#">
                  <div class="mask"></div>
              </a>
          </div>
          <!--/.Card image-->

          <!--Card content-->
          <div class="card-block">
              <!--Title-->
              <h4 class="card-title">망고플레이트</h4>
              <!--Text-->
              <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
              <button class="btn btn-primary" data-toggle="modal" data-target="#mangoplate">2등 찾기</button>
          </div>
          <!--/.Card content-->
          

      </div>
      <!--/.Card-->
  </div>
  <!--First columnn-->

  <!--Second columnn-->
  <div class="col-md-4">
      <!--Card-->
      <div class="card">

          <!--Card image-->
          <div class="view overlay hm-white-slight">
              <img src="<%= asset_path("diningcode.jpg") %>" class="img-fluid" alt="" height="350">
              <a href="#">
                  <div class="mask"></div>
              </a>
          </div>
          <!--/.Card image-->

          <!--Card content-->
          <div class="card-block">
              <!--Title-->
              <h4 class="card-title">다이닝코드</h4>
              <!--Text-->
              <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
              <button class="btn btn-primary" data-toggle="modal" data-target="#diningcode">2등 찾기</button>
          </div>
          <!--/.Card content-->

      </div>
      <!--/.Card-->
  </div>
  <!--Second columnn-->

  <!--Third columnn-->
  <div class="col-md-4">
      <!--Card-->
      <div class="card">

          <!--Card image-->
          <div class="view overlay hm-white-slight">
              <img src="<%= asset_path("poing.jpg") %>" class="img-fluid" alt="" height="350px">
              <a href="#">
                  <div class="mask"></div>
              </a>
          </div>
          <!--/.Card image-->

          <!--Card content-->
          <div class="card-block">
              <!--Title-->
              <h4 class="card-title">포잉</h4>
              <!--Text-->
              <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
              <button class="btn btn-primary" data-toggle="modal" data-target="#poing">2등 찾기</button>
          </div>
          <!--/.Card content-->

      </div>
      <!--/.Card-->
    </div>
    <!--Third columnn-->
  </div>
</div>

<!-- Modal mangoplate -->
<div class="modal fade" id="mangoplate" role="dialog">
  <div class="modal-dialog">
  
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">by 망고플레이트</h4>
      </div>
      <div class="modal-body">
        <p><%= @place_p %></p>
        <div style="background-size: 100%; width:200px; height:200px; <%=@img_p%>; background-repeat:no-repeat;"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    
  </div>
</div>

<!-- Modal diningcode -->
<div class="modal fade" id="diningcode" role="dialog">
  <div class="modal-dialog">
  
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">by 다이닝코드</h4>
      </div>
      <div class="modal-body">
        <p></p>
          
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    
  </div>
</div>

<!-- Modal poing -->
<div class="modal fade" id="poing" role="dialog">
  <div class="modal-dialog">
  
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">by 포잉</h4>
      </div>
      <div class="modal-body">
        <p><%= @place_p %> <!-- 포잉 이름 -->
          <div style="background-size: 100%; width:200px; height:200px; <%=@img_p%>; background-repeat:no-repeat;"></div> <!-- 포잉 이미지 --></p>
            <a href="https://search.naver.com/search.naver?where=nexearch&query=서울대입구역+<%=@place_p%>&sm=top_hty&fbm=1&ie=utf8">
              <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQuUelYDLbvsq7R9TY9Vus2i0USyfRIu__cjkMZ4pPyrFUUejyx" width="25" height="25">검색
            </a>
          </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    
  </div>
</div>


<div id="map" style="width:350px;height:350px;"></div>

<script type="text/javascript" src="//apis.daum.net/maps/maps3.js?apikey=2782121bb3bac125a7aa23d04fe0ffd1&libraries=services"></script>
<script>
// 마커를 클릭하면 장소명을 표출할 인포윈도우 입니다
var infowindow = new daum.maps.InfoWindow({zIndex:1});

var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = {
        center: new daum.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
    };  

// 지도를 생성합니다    
var map = new daum.maps.Map(mapContainer, mapOption); 

// 장소 검색 객체를 생성합니다
var ps = new daum.maps.services.Places(); 

// 키워드로 장소를 검색합니다
ps.keywordSearch('서울대입구역 자연별곡', placesSearchCB); 

// 키워드 검색 완료 시 호출되는 콜백함수 입니다
function placesSearchCB (status, data, pagination) {
    if (status === daum.maps.services.Status.OK) {

        // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
        // LatLngBounds 객체에 좌표를 추가합니다
        var bounds = new daum.maps.LatLngBounds();

        for (var i=0; i<data.places.length; i++) {
            displayMarker(data.places[i]);    
            bounds.extend(new daum.maps.LatLng(data.places[i].latitude, data.places[i].longitude));
        }       

        // 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다
        map.setBounds(bounds);
    } 
}

// 지도에 마커를 표시하는 함수입니다
function displayMarker(place) {
    
    // 마커를 생성하고 지도에 표시합니다
    var marker = new daum.maps.Marker({
        map: map,
        position: new daum.maps.LatLng(place.latitude, place.longitude) 
    });

    // 마커에 클릭이벤트를 등록합니다
    daum.maps.event.addListener(marker, 'click', function() {
        // 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다
        infowindow.setContent('<div style="padding:5px;font-size:12px;">' + place.title + '</div>');
        infowindow.open(map, marker);
    });
}
</script>